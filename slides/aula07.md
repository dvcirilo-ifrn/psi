---
theme: default
size: 4:3
marp: true
paginate: true
_paginate: false
title: Aula 07: Models
author: Diego Cirilo

---
<style>
img {
  display: block;
  margin: 0 auto;
}
</style>

# <!-- fit --> Programação de Sistemas para Internet

### Prof. Diego Cirilo

**Aula 07**: Models

---
# Dados do sistema
- Como armazenar os dados do sistema?
- SGBD - Sistema de Gerenciamento de Banco de Dados
- SQL - *Structured Query Language*

---
# Configurações do BD
- No arquivo `settings.py` há a seção `DATABASE`
---
# ORM
- Gerenciar comandos SQL pode ser complicado.
- ORM - *Object Relational Mapping*
- Podemos tratar os dados do BD como objetos

---
# Models Django
- No Django o ORM é feito nos *Models* (`models.py`)
- Nele definimos os modelos de dados, seus atributos e comportamento.
- Cada modelo é uma classe Python que herda de `django.db.models.Model`
- Cada atributo de um model representa um campo no BD
- O Django se responsabiliza por gerenciar as tabelas, *queries*, etc.

---
# Exemplo
```py
from django.db import models

class Pessoa(models.Model):
    nome = models.CharField(max_length=30)
    sobrenome = models.CharField(max_length=30)
```
```sql
CREATE TABLE myapp_pessoa (
    "id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    "nome" varchar(30) NOT NULL,
    "sobrenome" varchar(30) NOT NULL
);
```

---
# Migrations
- Arquivo com comandos para o SGBD
- Permite recriar a estrutura (*schema*) do BD em qualquer computador.
- Novas migrações devem ser criadas sempre que alteramos os dados em Models
- `python manage.py makemigrations`
- Para **aplicar** as *migrations*, ou seja, criar/alterar as tabelas no SGBD:
- `python manage.py migrate`
- É importante sempre lembrar de criar/aplicar as migrations.

---
# 